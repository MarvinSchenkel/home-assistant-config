alias: 'script_play_random_music'

variables:
  normal: ["Ambient / Relax", "A.M.R Radio", "Chill House 2021", "Deep", "Trance", "Progressive", "Chill Lounge", "Chillout Lounge", "Lounge - Soft House", "Coffee Club", "Chill Beats Music \U0001F497 groove, relax, study"]
  chill: ["Ambient / Relax", "A.M.R Radio", "Chill step", "Chill Lounge", "Chillout Lounge", "Lounge - Soft House", "Lounge - Soft House", "The Wind Down", "Chill Beats Music \U0001F497 groove, relax, study", "Chill Tracks"]
  morning: ["Meditative Guitar", "Ambient Relaxation", "Spa Treatment"]
  trance_deep: ["Deep", "Trance", "Progressive"]

sequence:
  - service: media_player.shuffle_set
    data:      
      shuffle: true
    data_template:
      entity_id: '{{ sonos_entity }}'
  - choose:
    - conditions:
        - condition: template
          value_template: '{{ genre == "normal" }}'
      sequence:
        - service: media_player.select_source
          data_template:
            entity_id: '{{ sonos_entity }}'
            source: '{{ normal | random }}'
    - conditions:
        - condition: template
          value_template: '{{ genre == "chill" }}'
      sequence:
        - service: media_player.select_source
          data_template:
            entity_id: '{{ sonos_entity }}'
            source: '{{ chill | random }}'
    - conditions:
        - condition: template
          value_template: '{{ genre == "trance_deep" }}'
      sequence:
        - service: media_player.select_source
          data_template:
            entity_id: '{{ sonos_entity }}'
            source: '{{ trance_deep | random }}'
    - conditions:
        - condition: template
          value_template: '{{ genre == "morning" }}'
      sequence:
        - service: media_player.select_source
          data_template:
            entity_id: '{{ sonos_entity }}'
            source: '{{ morning | random }}'
      