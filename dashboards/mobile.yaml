button_card_templates: !include button_card_templates.yaml

kiosk_mode:
  hide_header: true

views:
  - type: custom:grid-layout
    path: 0
    layout:
      #default
      grid-gap: var(--custom-layout-card-padding)
      grid-template-columns: repeat(4, 1fr) 0
      grid-template-rows: 0 repeat(2, fit-content(100%)) 0fr
      grid-template-areas: |
        "sidebar  .          .           .         ."
        "sidebar  woonkamer  slaapkamer  badkamer  ."
        "sidebar  media      energie     thuis     ."
        "sidebar  footer     footer      footer    ."
      mediaquery:
        #phone
        "(max-width: 800px)":
          grid-gap: calc(var(--custom-layout-card-padding) * 1.5)
          grid-template-columns: 0 repeat(2, 1fr) 0
          grid-template-rows: 0 repeat(5, fit-content(100%)) 0fr
          grid-template-areas: |
            ".  .           .         ."
            ".  sidebar     sidebar   ."
            ".  woonkamer   thuis     ."
            ".  slaapkamer  badkamer  ."
            ".  media       energie   ."
            ".  footer      footer    ."
            ".  .           .         ."
        #portrait
        "(max-width: 1200px)":
          grid-gap: var(--custom-layout-card-padding)
          grid-template-columns: repeat(3, 1fr) 0
          grid-template-rows: 0 repeat(3, fit-content(100%)) 0fr
          grid-template-areas: |
            "sidebar  .           .         ."
            "sidebar  woonkamer   badkamer  ."
            "sidebar  slaapkamer  energie   ."
            "sidebar  media       thuis     ."
            "sidebar  footer      footer    ."
            "sidebar  .           .         ."
    cards:
      #################################################
      #                                               #
      #                    SIDEBAR                    #
      #                                               #
      #################################################
      # - type: custom:vertical-stack-in-card
      #   view_layout:
      #     grid-area: sidebar
      #   mode: vertical
      #   cards:
      - type: markdown
        view_layout:
          grid-area: sidebar
        content: |
          {% set attributes = states.sensor.template_sidebar.attributes | default %}
          {% for template in attributes %}
          {{ state_attr('sensor.template_sidebar', template) }}
          {% endfor %}

      - type: grid
        view_layout:
          grid-area: sidebar
        cards:
          - type: button
            icon: mdi:robot-vacuum
            tap_action: !include popup/sidebar_vacuum.yaml

      #################################################
      #                                               #
      #                  LIVING ROOM                  #
      #                                               #
      #################################################

      - type: grid
        title: Woonkamer
        view_layout:
          grid-area: woonkamer
        columns: 1
        cards:
          - type: custom:swipe-card
            start_card: 1
            #   parameters:
            #     roundLengths: true
            #     effect: coverflow
            #     speed: 650
            #     spaceBetween: 20
            #     threshold: 7
            #     coverflowEffect:
            #       rotate: 80
            #       depth: 300
            cards:
              - type: grid
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: light.dinner
                    name: Eettafel
                    template:
                      - light
                      - icon_shade

                  - type: custom:button-card
                    entity: light.fibaro_livingroom
                    name: Woonkamer
                    template:
                      - light
                      - icon_spot

                  - type: custom:button-card
                    entity: light.fibaro_kitchen
                    name: Keuken
                    template:
                      - light
                      - icon_spot

                  - type: custom:button-card
                    entity: fan.itho
                    name: Ventilatie
                    template:
                      - base
                      - icon_fan
                      - loader

            # - type: grid
            #   columns: 2
            #   cards:
            #     - type: custom:button-card
            #       icon: mdi:blinds-open
            #       entity: cover.kitchen
            #       name: Luxaflex Keuken
            #       variables:
            #         shade_scenes:
            #           - scene.keuken_half_open
            #           - scene.keuken_half_dicht
            #           - scene.keuken_dicht
            #       template:
            #         - shade

            #     - type: custom:button-card
            #       icon: mdi:blinds-open
            #       entity: cover.kitchen
            #       name: Luxaflex Keuken
            #       variables:
            #         shade_scenes:
            #           - scene.keuken_half_open
            #           - scene.keuken_half_dicht
            #           - scene.keuken_dicht
            #       template:
            #         - shade

            #     - type: custom:button-card
            #       icon: mdi:blinds-open
            #       entity: cover.kitchen
            #       name: Luxaflex Keuken
            #       variables:
            #         shade_scenes:
            #           - scene.keuken_half_open
            #           - scene.keuken_half_dicht
            #           - scene.keuken_dicht
            #       template:
            #         - shade
      #################################################
      #                                               #
      #                    Slaapkamer                 #
      #                                               #
      #################################################

      - type: grid
        title: Slaapkamer
        view_layout:
          grid-area: slaapkamer
        columns: 2
        cards:
          - type: custom:button-card
            entity: light.fibaro_master_bedroom
            name: Plafond
            template:
              - light
              - icon_spot
          - type: custom:button-card
            icon: mdi:blinds-open
            entity: cover.master_bedroom
            name: Luxaflex
            variables:
              shade_scenes:
                - scene.slaapkamer_half_open
                - scene.slaapkamer_half_dicht
                - scene.slaapkamer_dicht
            template:
              - shade

      #################################################
      #                                               #
      #                    Badkamer                   #
      #                                               #
      #################################################

      - type: grid
        title: Badkamer
        view_layout:
          grid-area: badkamer
        columns: 2
        cards:
          - type: markdown
            view_layout:
              grid-area: footer
            content: >
              Test

      #################################################
      #                                               #
      #                     MEDIA                     #
      #                                               #
      #################################################

      - type: grid
        title: Media
        view_layout:
          grid-area: media
        columns: 1
        cards:
          - type: custom:swipe-card
            start_card: 1
            parameters:
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            cards:
              - type: vertical-stack
                cards:
                  - type: conditional
                    conditions:
                      - entity: sensor.dash_media_item
                        state: idle
                    card:
                      type: custom:button-card
                      entity: sensor.plex_recently_added
                      tap_action:
                        action: none
                      template:
                        - conditional_media
                        - recently_downloaded
                        - icon_plex

                  - type: conditional
                    conditions:
                      - entity: sensor.dash_media_item
                        state: apple_tv
                    card:
                      type: custom:button-card
                      entity: media_player.apple_tv
                      template:
                        - conditional_media
                        - icon_apple_tv

                  - type: conditional
                    conditions:
                      - entity: sensor.dash_media_item
                        state: sonos
                    card:
                      type: custom:button-card
                      entity: media_player.sonos_livingroom
                      template:
                        - conditional_media
                        - icon_sonos

              - type: grid
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: media_player.apple_tv
                    name: Apple TV
                    template:
                      - media
                      - icon_apple_tv

                  - type: custom:button-card
                    entity: media_player.sonos_livingroom
                    name: Sonos
                    template:
                      - media
                      - icon_sonos

      #################################################
      #                                               #
      #                    Energie                     #
      #                                               #
      #################################################

      - type: grid
        title: Energie
        view_layout:
          grid-area: energie
        columns: 2
        cards:
          - type: custom:button-card
            entity: sensor.solaredge_energy_today_kwh
            name: Vandaag
            template:
              - info

      #################################################
      #                                               #
      #                     Thuis                     #
      #                                               #
      #################################################

      - type: grid
        title: Thuis
        view_layout:
          grid-area: thuis
        columns: 2
        cards:
          - type: custom:button-card
            entity: sensor.marvin_status
            name: Marvin
            tap_action: !include popup/home_marvin.yaml
            hold_action:
              action: none
            template: person

          - type: custom:button-card
            entity: sensor.laura_status
            name: Laura
            tap_action: !include popup/home_laura.yaml
            hold_action:
              action: none
            template: person
      #################################################
      #                                               #
      #                    FOOTER                     #
      #                                               #
      #################################################

      - type: markdown
        view_layout:
          grid-area: footer
        content: >
          Test
