light:
  template:
    - icon_main
    - circle
  show_state: false
  show_icon: true
  show_name: false
  show_label: false
  size: 55%
  color: auto
  color_type: icon
  tap_action:
    action: toggle
    haptic: light
  styles:
    card:
      - width: 3.5vw
      - height: 3.5vw
      - borderRadius: 10vw
      - background-color: >
          [[[ return (entity.state === 'on' || entity.state === 'home') ? 'rgba(255, 255, 255, 1.0)' : 'rgba(115, 115, 115, 0.6)'; ]]]
  variables:
    circle_input: >
      [[[ return Math.round(entity.attributes.brightness / 2.54); ]]]
    circle_color: var(--button-card-light-color)
  hold_action: &interaction
    action: fire-dom-event
    browser_mod:
      command: popup
      style:
        $: |
          .popup-inner{
            padding: 15px 0 30px 0;
          }
          .mdc-dialog .mdc-dialog__container {
          }
          .mdc-dialog .mdc-dialog__container .mdc-dialog__surface {
            border-radius: 2vw;
          }
          .mdc-dialog .mdc-dialog__scrim {
              backdrop-filter: blur(10px);
          }
          ha-svg-icon {
              margin-top:-7px;
          }
        .: |
          :host {
            --mdc-dialog-scrim-color: rgba(0,0,0,0.5);
          }
          mwc-icon-button {
            color: #FFF;
          }
      title: >
        [[[ return entity.attributes.friendly_name ]]]
      card:
        type: entities
        entities:
          - type: custom:light-popup-card
            entity: >
              [[[ return entity.entity_id ]]]
            icon: none
            hideIcon: true
            fullscreen: false
            brightnessWidth: 130px
            brightnessHeight: 360px
            borderRadius: 1.7em
            sliderColor: "#c7c7c7"
            sliderTrackColor: rgba(25, 25, 25, 0.9)
          - type: custom:hui-element
            card_type: horizontal-stack
            card_mod:
              style: >
                #root {
                  justify-content: center;
                  margin-top: 2em;
                  width: 100%;
                }
            cards:
              - type: custom:button-card
                styles:
                  card:
                    - background: "#d8d9e1"
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: >
                      [[[ return entity.entity_id ]]]
                    color_temp: 153
                template: color_light
              - type: custom:button-card
                styles:
                  card:
                    - background: "#d5b08d"
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: >
                      [[[ return entity.entity_id ]]]
                    color_temp: 326
                template: color_light
              - type: custom:button-card
                styles:
                  card:
                    - background: "#ce944b"
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: >
                      [[[ return entity.entity_id ]]]
                    color_temp: 500
                template: color_light
  double_tap_action: *interaction
