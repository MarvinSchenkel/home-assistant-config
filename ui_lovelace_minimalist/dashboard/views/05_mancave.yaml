title: "Mancave"
path: mancave
icon: "mdi:google-controller"
cards:
  - type: "vertical-stack"
    cards:
      - type: "custom:button-card"
        template: card_title
        name: Mancave

      - type: horizontal-stack
        cards:
          - type: "custom:button-card"
            color_type: blank-card
          - type: custom:button-card
            template: custom_light_scene
            entity: scene.mancave_lights_normal
            variables:
              ulm_card_light_color: "#d8d9e1"
              ulm_chip_icon: "ðŸ’¡"
              ulm_chip_icon_label: "Normaal"
              ulm_chip_font_color: "#212121"
          - type: custom:button-card
            template: custom_light_scene
            entity: scene.mancave_lights_tv
            variables:
              ulm_card_light_color: "#ce944b"
              ulm_chip_icon: "ðŸ’¡"
              ulm_chip_icon_label: "Dim"
              ulm_chip_font_color: "#212121"
          - type: "custom:button-card"
            color_type: blank-card

      - type: horizontal-stack
        cards:
          - type: "custom:button-card"
            template: card_generic_swap
            entity: input_select.mancave_current_cover_scene
            icon: "mdi:blinds"
            label: >
              [[[ 
                if (entity.state == "halfopen") return "Half Open";
                if (entity.state == "halfclosed") return "Half Dicht";
                if (entity.state == "closed") return "Dicht";
                if (entity.state == "ventilating") return "Ventileren";
                if (entity.state == "open") return "Open";
                if (entity.state == "ventilatingnight") return "Ventileren Nacht";
              ]]]
            tap_action:
              action: "fire-dom-event"
              browser_mod:
                command: "popup"
                title: "Luxaflex scene"
                style:
                  $: >
                    [[[
                      if (hass.themes.theme.includes("desktop")){
                        var dialog = `
                          .mdc-dialog__surface{
                            border-radius: var(--border-radius) !important;
                          }
                        `;
                      } else{
                        var dialog = "";
                      }
                      return `
                        *{
                          --secondary-background-color: none !important;
                        }
                        ${dialog}
                      `;
                    ]]]
                  hui-vertical-stack-card:
                    $: >
                      button-card {
                        align-self: center;
                        padding: 0.2em 0 2.3em 0;
                      }
                      hui-entities-card{
                        padding: 0.8em 1.4em;
                      }
                    $hui-entities-card$: >
                      ha-card{
                        box-shadow: none;
                      }
                    $hui-history-graph-card$: >
                      .content {
                        padding: 0 2.4em !important;
                      }
                      ha-card{
                        box-shadow: none;
                      }
                    $hui-glance-card$: >
                      ha-card{
                        box-shadow: none;
                      }
                    $hui-map-card:
                      $: >
                        ha-icon-button {
                          color: rgba(var(--color-blue),1);
                        }
                      $ha-map:
                        $: >
                          .leaflet-control-attribution {
                            display: none;
                          }
                          .leaflet-touch .leaflet-control-layers, .leaflet-touch .leaflet-bar {
                            border: 2px solid rgba(var(--color-blue),0.4) !important;
                          }
                          .leaflet-bar a {
                            background-color: rgba(var(--color-blue),0.2) !important;
                            color: rgba(var(--color-blue),1) !important;
                          }
                          .leaflet-bar a:first-child {
                            border-bottom: 2px solid rgba(var(--color-blue),0.4) !important;
                          }
                          .leaflet-pane.leaflet-tile-pane {
                            filter: contrast(95%);
                          }
                card:
                  type: "vertical-stack"
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: "custom:button-card"
                          template: card_script
                          variables:
                            ulm_card_script_title: Open
                            ulm_card_script_icon: "mdi:blinds-open"
                          tap_action:
                            action: call-service
                            service: scene.turn_on
                            service_data:
                              entity_id: scene.mancave_cover_halfopen
                        - type: "custom:button-card"
                          template: card_script
                          variables:
                            ulm_card_script_title: Half-dicht
                            ulm_card_script_icon: "mdi:blinds"
                          tap_action:
                            action: call-service
                            service: scene.turn_on
                            service_data:
                              entity_id: scene.mancave_cover_halfclosed
                    - type: horizontal-stack
                      cards:
                        - type: "custom:button-card"
                          template: card_script
                          variables:
                            ulm_card_script_title: Dicht
                            ulm_card_script_icon: "mdi:blinds"
                          tap_action:
                            action: call-service
                            service: scene.turn_on
                            service_data:
                              entity_id: scene.mancave_cover_closed
                        - type: "custom:button-card"
                          color_type: blank-card

          - type: "custom:button-card"
            template: card_light
            entity: light.mancave
            variables:
              ulm_card_light_enable_slider: true
              ulm_card_light_enable_color: true
              ulm_card_light_force_background_color: true
              ulm_card_light_name: Lamp

      - type: "custom:button-card"
        template: card_title
        name: Sensoren

      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: "custom:button-card"
                template: card_binary_sensor_alert
                variables:
                  - ulm_card_binary_sensor_alert: true
                entity: binary_sensor.presence_mancave
                show_last_changed: true
              - type: "custom:button-card"
                template: card_binary_sensor
                variables:
                  - ulm_card_binary_sensor_alert: true
                entity: binary_sensor.mancave_door_open
                show_last_changed: true
          - type: "custom:button-card"
            template: card_graph
            variables:
              ulm_card_graph_name: Temperatuur
              ulm_card_graph_entity: sensor.pir_mancave_temperature
              ulm_card_graph_type: fill
              ulm_card_graph_hours: 24
